{
  "from": "quinn",
  "to": ["atlas"],
  "cc": ["fulton", "sarah"],
  "subject": "REVIEW REQUEST: System Announcements Architecture",
  "priority": "high",
  "timestamp": "2026-02-11T19:00:00Z",
  "ticket": "NEW - pending epic creation",
  "body": "Atlas,\n\nEl Gotan has requested a System Announcements feature. I've drafted an architecture doc and need your review and approval before we proceed.\n\n## Document Location\n\n```\n/Users/tobybalsley/MyDocs/AppDev/MasterCalendar/docs/SYSTEM-ANNOUNCEMENTS-ARCHITECTURE.md\n```\n\n## Summary\n\n**Purpose**: Deliver time-sensitive messages to authenticated users (new features, bug fixes, maintenance notices).\n\n**Key Decisions Made**:\n\n| Decision | Choice | Rationale |\n|----------|--------|----------|\n| Storage | MongoDB (Phase 1) | All existing data in MongoDB |\n| Future Storage | Firestore (Phase 2+) | For real-time chat/messaging later |\n| Display | Banner | Less intrusive than modals |\n| Targeting | Role + Date Range | Target by user role and active dates |\n| Dismissals | localStorage first | Simpler, backend sync later |\n\n## Proposed Data Model\n\n```javascript\n{\n  title: \"New Map Feature\",\n  message: \"We've added density overlays...\",\n  type: \"feature\",  // feature|bugfix|maintenance|info|warning\n  priority: \"normal\",\n  targetRoles: [\"user\", \"organizer\"],\n  targetAppIds: [\"1\"],\n  startDate: ISODate(\"2026-02-11\"),\n  endDate: ISODate(\"2026-02-28\"),\n  dismissible: true,\n  isActive: true\n}\n```\n\n## API Endpoints Proposed\n\n- GET /api/announcements/active - Fetch active for current user\n- POST /api/announcements/dismiss - Mark dismissed\n- CRUD /api/ops/announcements/* - Admin management (CalOps)\n\n## Questions for Atlas\n\n1. **Collection naming**: `systemAnnouncements` or `announcements`?\n2. **Index strategy**: Compound index on (isActive, startDate, endDate, targetAppIds)?\n3. **CalOps integration**: Add to existing admin or new section?\n4. **Multi-app**: Share announcements between TT/HJ or separate?\n5. **Firestore timeline**: When should we plan Phase 2 (real-time messaging)?\n\n## Estimated Scope\n\n~27 story points across 8 tickets (BE + FE + OPS)\n\n## Request\n\nPlease review the architecture doc and provide:\n1. Approval to proceed (or required changes)\n2. Recommendations on open questions\n3. Any architectural concerns\n\nâ€” Quinn\n\ncc: Fulton (backend), Sarah (frontend)"
}
