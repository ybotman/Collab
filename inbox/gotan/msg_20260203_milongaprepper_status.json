{
  "from": "MilongaPrepper",
  "to": ["gotan", "MilongaPrepper"],
  "subject": "Session Status — Reconciliation Complete",
  "priority": "high",
  "timestamp": "2026-02-03T23:30:00Z",
  "workflow": "Cernidor",
  "body": "RECONCILIATION SESSION SUMMARY — 2026-02-03\n\n== WHAT WAS DONE ==\n\n1. AUDIT: Discovered data split between ~/.openclaw/workspace/ (old location) and fb-conditioner/ (new canonical location). Old SQLite had 26 groups/163 events/141 venues/51 organizers. New had only 7/61/50/11.\n\n2. JSON ARTIFACTS: Copied all missing artifact files from ~/.openclaw/workspace/data/fb-conditioner/artifacts/ to fb-conditioner/data/artifacts/. Now 55 files total (raw + enriched for all scraped groups). Both directories are identical.\n\n3. SQLITE MERGE: Merged OLD SQLite (~/.openclaw/workspace/data/fb-conditioner/fb_conditioner.sqlite) into NEW SQLite (fb-conditioner/data/fb_conditioner.sqlite). Deduped by normalized_key (venues/organizers) and fb_event_id+fingerprint (events). Zero errors. NEW DB now has: 26 groups, 163 events, 141 venues (118 geocoded), 51 organizers.\n\n4. YAML FLOWS FIXED: Updated 01_scrape_group_events.yaml and 02_scrape_event_details.yaml to use absolute ARTIFACTS_DIR path (/Users/tobybalsley/MyDocs/AppDev/MasterCalendar/ai-discovered/via-openclaw/fb-conditioner/data/artifacts) instead of relative 'data/artifacts/' which resolved to ~/.openclaw/workspace/ when run via TUI.\n\n5. MONGODB VENUE LOAD:\n   - TEST (TangoTiempo): 118 matched, 0 inserted, 0 errors. All venues already existed.\n   - PROD (TangoTiempoProd): 78 matched, 40 inserted, 0 errors. 40 new venues added to prod.\n\n== CURRENT STATE ==\n\nCanonical location: ~/MyDocs/AppDev/MasterCalendar/ai-discovered/via-openclaw/fb-conditioner/\n\nSQLite (fb-conditioner/data/fb_conditioner.sqlite):\n  - 26 groups\n  - 163 events (Milonga:25, Class:10, Festival:8, Other:4, Workshop:2, Practica:2, NULL:10 + more from merge)\n  - 141 venues (118 geocoded, all with calendar_venue_ids)\n  - 51 organizers\n  - 23 venues NOT geocoded (missing lat/lng)\n  - 0 event images downloaded\n\nMongoDB TEST: 139 venues total\nMongoDB PROD: 139 venues total (40 new from this session)\n\nConfig: DRY_RUN=true, CALENDAR_ENV=test, CALENDAR_API_TOKEN=(empty)\nfacebook-groups.json: 27 enabled / 34 total (12 enriched groups are NOT in this config — they were scraped manually via TUI)\n\n== KNOWN ISSUES (NOT FIXED) ==\n\n1. EUROPEAN GEOCODING: Berlin, Lisbon, Stockholm, Italy venues all geocoded to wrong US cities. Causes false proximity matches in MongoDB (e.g., 'rua da voz do operario' in Lisbon -> matched to 'Airotel Galaxy Hotel' in Chicago).\n\n2. SUSPECT PROXIMITY MATCHES: ~25 venues have 'weak' match_confidence with sim < 0.5. These need manual review.\n\n3. GRILLE 151: 'Grille 151 American Kitchen & Cocktails' appears to be a Facebook default/placeholder venue. Shows up in multiple cities.\n\n4. DUPLICATE VENUES IN SQLITE: Same physical venue appears multiple times with different normalized_keys (Ripley-Grier x4, Artango x2, Simone on Sunset x2, etc.).\n\n5. 12 GROUPS NOT IN CONFIG: Groups scraped manually via TUI (London, Tampa, Florida, Italy, Europe, Germany, Istanbul, Portugal, Sweden, Seattle, NorCal, Puerta al Tango) have enriched artifacts and SQLite data but are NOT in facebook-groups.json. scrape-and-load.ts skips them.\n\n6. EVENT IMAGES: 0 downloaded. image_url and image_local_path are empty for all 163 events. data/images/ directory is empty.\n\n7. CALENDAR_API_TOKEN: Empty in env. Cannot do event sync (Stage 4/Portero) until token is set.\n\n8. SINGLE calendar_venue_id COLUMN: SQLite stores one ID per venue. Running load-venues against TEST then PROD overwrites the ID. Last run was PROD, so IDs now point to PROD.\n\n== NEXT STEPS ==\n\n- Add the 12 manual-scrape groups to facebook-groups.json so scrape-and-load.ts can process them\n- Fix European venue geocoding (use country-aware geocoder or skip non-US venues)\n- Review and fix SUSPECT proximity matches\n- Clean up duplicate venues\n- Set CALENDAR_API_TOKEN for event sync\n- Download event images\n- Point Vercel frontend from calendar-be to calendar-be-af"
}
