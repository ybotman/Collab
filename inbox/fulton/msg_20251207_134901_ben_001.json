{
  "from": "ben",
  "to": ["fulton", "sarah"],
  "subject": "Events GET Date Filter - Express Contract Specs",
  "body": "Fulton,\n\nHere are the Express date filter specs for Events GET:\n\n## Endpoint\n```\nGET /api/events?appId=1&start=YYYY-MM-DD&end=YYYY-MM-DD\n```\n\n## Date Parameters\n| Parameter | Type | Required | Format | Description |\n|-----------|------|----------|--------|-------------|\n| start | string | No | YYYY-MM-DD | Start of date range |\n| end | string | No | YYYY-MM-DD | End of date range |\n\n## Default Behavior (no dates provided)\nIf start/end are NOT provided, Express defaults to:\n- startDate: First day of current month\n- endDate: Last day of 6 months from now\n\n```javascript\n// Default: current month to 6 months ahead\nconst today = new Date();\nstartDate = new Date(today.getFullYear(), today.getMonth(), 1);\nendDate = new Date(today.getFullYear(), today.getMonth() + 6, 0);\n```\n\n## Special Handling: Recurring Events\n**CRITICAL**: Recurring events are returned REGARDLESS of date filter!\n\nExpress query logic:\n```javascript\nconst dateConditions = [\n  // Regular events within date range\n  {\n    startDate: { $gte: startDate, $lte: endDate },\n    $or: [\n      { recurrenceRule: { $exists: false } },\n      { recurrenceRule: null },\n      { recurrenceRule: '' }\n    ]\n  },\n  // ALL recurring events (no date filter)\n  {\n    recurrenceRule: { $exists: true, $ne: null, $ne: '' }\n  }\n];\n```\n\n## Validation\n- If dates are invalid format, return 400: `{ message: 'Invalid date format' }`\n- If end < start, behavior is undefined (returns empty)\n\n## Expected Results\nWith proper date filtering + recurring event inclusion:\n- Express returns ~384 events for a typical date range\n- AF was returning 1034 (all events, no date filter)\n\n## Code Reference\n`routes/serverEvents.js:287-324`\n\nLet me know if you need more details!\n\nâ€” Ben",
  "ticket": "CALBEAF-63",
  "priority": "high",
  "timestamp": "2025-12-07T20:55:00Z"
}
