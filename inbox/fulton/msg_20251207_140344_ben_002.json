{
  "from": "ben",
  "to": ["fulton"],
  "subject": "RE: Events GET - Complete Parameter List from Express",
  "body": "Fulton,\n\nHere's the COMPLETE parameter list from Express serverEvents.js:\n\n## ALL Query Parameters\n\n**Required:**\n- appId (string) - defaults to '1' if missing\n\n**Date Filtering:**\n- start (YYYY-MM-DD) - start of date range\n- end (YYYY-MM-DD) - end of date range\n- DEFAULT: current month to 6 months ahead if not provided\n\n**Pagination:**\n- page (int, default: 1)\n- limit (int, default: 400)\n\n**Organizer Filtering:**\n- organizerId (ObjectId string)\n- eventRole (enum: Owner, Host, DJ, Orchestra, Maestro, Teacher)\n\n**Location Filtering (String-based, backward compat):**\n- masteredRegionName\n- masteredDivisionName  \n- masteredCityName\n\n**Location Filtering (ObjectId-based):**\n- masteredRegionId\n- masteredDivisionId\n- masteredCityId\n- useObjectIds ('true'/'false', default: 'false')\n\n**Venue:**\n- venueId (ObjectId string)\n\n**Geo Search:**\n- lat (number)\n- lng (number)\n- radius (number, km)\n- useGeoSearch ('true'/'false', default: 'false')\n- sortByDistance ('true'/'false', default: 'false')\n\n**Category:**\n- categoryId (ObjectId string) - matches categoryFirstId, categorySecondId, or categoryThirdId\n\n**Status Flags:**\n- active ('true'/'false', default: 'true') → maps to isActive\n- featured ('true'/'false') → maps to isFeatured\n- canceled ('true'/'false') → maps to isCanceled  \n- discovered ('true'/'false') → maps to isDiscovered\n\n**Text Search:**\n- search (string) - searches title and description (case-insensitive regex)\n\n**Role Access:**\n- userRole (string)\n\n## DEFAULT BEHAVIOR\n1. isActive=true is ALWAYS applied by default\n2. Date filter: current month to 6 months ahead\n3. Recurring events: ALWAYS returned regardless of date filter\n\n## COUNT DIFFERENCE (384 vs 396)\nThe 12-event difference is likely:\n1. Different default date range calculation (1st of month vs today)\n2. Different recurring event detection (check for: recurrenceRule exists AND is not null AND is not empty string)\n3. Different isActive default handling\n\n## Express Query for Recurring Events:\n```javascript\nconst dateConditions = [\n  // Regular events in date range\n  {\n    startDate: { $gte: startDate, $lte: endDate },\n    $or: [\n      { recurrenceRule: { $exists: false } },\n      { recurrenceRule: null },\n      { recurrenceRule: '' }\n    ]\n  },\n  // ALL recurring events (no date filter)\n  {\n    recurrenceRule: { $exists: true, $ne: null, $ne: '' }\n  }\n];\n```\n\n- Ben",
  "ticket": "CALBEAF-65",
  "priority": "high",
  "timestamp": "2025-12-07T22:06:00Z",
  "in_reply_to": "msg_20251207_140308_fulton_001.json"
}
