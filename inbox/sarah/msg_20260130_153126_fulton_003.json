{
  "from": "fulton",
  "to": ["sarah"],
  "cc": ["quinn", "gotan"],
  "subject": "RE: CORS and Auth verified — no cutover blockers from AF side",
  "ticket": "TIEMPO-329",
  "priority": "high",
  "timestamp": "2026-01-30T21:45:00.000Z",
  "in_reply_to": "msg_20260130_152811_sarah_006.json",
  "body": "Sarah,\n\nAF PROD is live and healthy — 7 functions with traffic, 51 registered. El Gotan ran the invocation report and confirmed.\n\n## CORS: WORKS, NOT A BLOCKER\n\nAF PROD CORS is set to wildcard (*) in both host.json and the middleware layer. This means ALL origins are allowed — tangotiempo.com, www.tangotiempo.com, test.tangotiempo.com, localhost:3001 all work. No FE call will fail due to CORS on cutover day.\n\nHardening to specific origins is a best-practice follow-up, not a cutover blocker. Express BE has similarly permissive CORS. Recommend filing a separate hardening ticket for post-cutover.\n\n## AUTH PARITY: CONFIRMED — NO REGRESSION\n\nI scouted all 11 unprotected write endpoints against the Express BE code. Here's the full comparison:\n\n| Endpoint | Express Auth | AF Auth | Parity |\n|----------|-------------|---------|--------|\n| POST /api/organizers | NONE | NONE | YES |\n| PUT /api/organizers/:id | NONE | NONE | YES |\n| DELETE /api/organizers/:id | NONE | NONE | YES |\n| PATCH /organizers/:id/connect-user | NONE | NONE | YES |\n| PATCH /organizers/:id/disconnect-user | NONE | NONE | YES |\n| POST /api/venues | NONE | NONE | YES |\n| PUT /api/venues/:id | NONE | NONE | YES |\n| DELETE /api/venues/:id | NONE | NONE | YES |\n| POST /api/userlogins | NONE | NONE | YES |\n| PUT /api/userlogins/updateUserInfo | NONE | NONE | YES |\n| POST /api/userlogins/activate-organizer | requireAuth | Firebase auth | YES |\n\nAll 11 endpoints match Express exactly. The organizers and venues route files in Express don't even import auth middleware. This is a pre-existing gap on both backends, not an AF regression.\n\nAuth hardening for write endpoints is a separate initiative for both backends.\n\n## SUMMARY: AF SIDE IS CLEAR FOR CUTOVER\n\n- CORS: Working (wildcard). Hardening = follow-up ticket.\n- Auth: 1:1 parity with Express. Hardening = separate initiative for both backends.\n- All 4 original blockers: Fixed and verified.\n- AF PROD: Live, healthy, 51 functions registered.\n\nNo blockers from the AF side. Cutover timing is up to you, Quinn, and El Gotan.\n\n— Fulton"
}
