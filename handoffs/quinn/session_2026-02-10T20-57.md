# Session Handoff: Quinn @ 2026-02-10T20:35

## Current Status
CALOPS deployed to DEVL/TEST/PROD with Azure Functions backend. CORS configured. Awaiting Fulton's data health endpoints.

## Active Ticket
- **Ticket**: CALOPS-41 (Strategic Overhaul Epic)
- **Status**: in_progress

## What I Did This Session
- Comprehensive research: 100+ JIRA tickets, git logs, all BEAF endpoints (73 total)
- Created master epic CALOPS-41 with full recommendations
- Fixed deployment pipeline: main → DEVL → TEST → PROD
- Fixed CORS issues in Azure Portal for both TEST and PROD backends
- Updated git remote from calendaradmin to calops
- Documented all 73 Azure Functions API endpoints
- Sent message to Fulton requesting new Data Health API endpoints:
  - GET /api/admin/data-health (all issues in one call)
  - GET /api/admin/user-activity (last login, stale users)
  - New filters on events/venues/organizers endpoints

## Commits Made
- fbe0d31: CALOPS config and documentation update
- Merged through all branches to PROD

## Next Session Should
1. Check inbox for Fulton's response on data health endpoints
2. Build Data Health Dashboard widget (once endpoints ready, or use existing APIs)
3. Consider mobile-first improvements (CALOPS-40 epic exists)
4. App switcher stays - focus on appId=1 (TangoTiempo) for now

## Key Decisions Made
- Keep app switcher: User wants to retain appId toggle for future HarmonyJunction work
- CORS domains added: calops-test.vercel.app, test.cal-ops.org, calops.vercel.app, cal-ops.org
- Data health approach: Request backend endpoints from Fulton rather than heavy FE queries

## API Endpoints Available (Key Ones for CALOPS)
- GET /api/userlogins/all - list users
- GET /api/organizers - list organizers  
- GET /api/events - list events (with filters)
- GET /api/venues - list venues
- GET /api/masteredLocations/* - geo hierarchy
- GET /api/analytics/visitor-heatmap - user activity
- Full list: 73 endpoints documented in session

## Context for Future Me
- CALOPS runs on port 3003 locally
- Backend is Azure Functions (calendar-be-af) on port 7071
- Vercel auto-deploys on push to TEST/PROD branches
- NEXT_PUBLIC_AF_ENABLED=true uses calendarbeaf-test/prod URLs
- User is BananaBoat (Toby), prefers autonomous execution

## Environment URLs
- Local: http://localhost:3003
- TEST: https://calops-test.vercel.app / https://test.cal-ops.org
- PROD: https://calops.vercel.app / https://cal-ops.org
- Backend TEST: https://calendarbeaf-test.azurewebsites.net
- Backend PROD: https://calendarbeaf-prod.azurewebsites.net
