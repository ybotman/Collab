# Session Handoff: Fulton @ 2026-02-17T22:00

## Current Status
PROD DOWN - Root cause identified: storage account calendarbeaf9a27 is broken

## Active Ticket
- **Ticket**: None (operational emergency)
- **Status**: in_progress

## What I Did This Session
- Confirmed CalendarBEAF-TEST is working (uses storage account `calendarbeaf8fd0`)
- Confirmed CalendarBEAF-PROD is DOWN (uses storage account `calendarbeaf9a27`)
- Checked storage account settings: keys match, networking open, key access enabled
- Created NEW function app CalendarAF-TEST to test if code corruption
- Deployed v1.21.0 (same as working TEST) to CalendarAF-TEST
- CalendarAF-TEST ALSO FAILS with 503 - same "Syncing triggers" hang

## Key Finding: ROOT CAUSE IDENTIFIED
The storage account `calendarbeaf9a27` is broken. All apps using this storage account fail:
- CalendarBEAF-PROD → calendarbeaf9a27 → FAILS
- CalendarAF-PROD → calendarbeaf9a27 → FAILS  
- CalendarAF-TEST → calendarbeaf9a27 → FAILS

The working app uses different storage:
- CalendarBEAF-TEST → calendarbeaf8fd0 → WORKS

## Next Session Should
1. **Option A (Quick Fix)**: Change CalendarBEAF-PROD to use storage account `calendarbeaf8fd0`
   - Update AzureWebJobsStorage
   - Update WEBSITE_CONTENTAZUREFILECONNECTIONSTRING
   - Create new WEBSITE_CONTENTSHARE
   - Restart and test

2. **Option B (Fix Storage Account)**: Investigate what's wrong with `calendarbeaf9a27`
   - Check for soft-deleted blobs/containers
   - Check access policies
   - Check activity logs for changes
   - Consider deleting and recreating

3. **Cleanup**: Delete CalendarAF-PROD and CalendarAF-TEST (test apps)

## Git State
- Currently on detached HEAD at d1f2b775 (v1.21.0)
- Changes stashed
- Run `git checkout PROD && git stash pop` to restore

## Context for Future Me
The "Forbidden from extensions API" and "Syncing triggers" failures are caused by the storage account, not the code. The same code that works perfectly on CalendarBEAF-TEST fails when deployed to any app using storage account calendarbeaf9a27.
